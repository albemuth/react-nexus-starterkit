"use strict";

require("6to5/polyfill");
var Promise = require("bluebird");var __DEV__ = (process.env.NODE_ENV !== "production");
var R = require("react-nexus");
var _ = R._;
var UplinkSimpleServer = require("nexus-uplink-simple-server");
var express = require("express");
var cors = require("cors");
var path = require("path");

var common = require("./common");
var App = require("./App");

// Render + static server
express().use(cors()).use(express["static"](path.join(__dirname, "..", "public"))).get("/favicon.ico", function (req, res) {
  return res.status(404).send(null);
}).use((new App()).prerender).listen(common.render.port);

(new UplinkSimpleServer({ guid: _.guid(),
  stores: [],
  rooms: [],
  actions: [],
  app: express().use(cors()) })).listen(common.uplink.port);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN6QixJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQUFBQyxJQUFNLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLFlBQVksQ0FBQyxDQUFDO0FBQzdGLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNqQyxJQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2QsSUFBTSxrQkFBa0IsR0FBRyxPQUFPLENBQUMsNEJBQTRCLENBQUMsQ0FBQztBQUNqRSxJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDbkMsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdCLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFN0IsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25DLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7O0FBRzdCLE9BQU8sRUFBRSxDQUNSLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUNYLEdBQUcsQ0FBQyxPQUFPLFVBQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUN6RCxHQUFHLENBQUMsY0FBYyxFQUFFLFVBQUMsR0FBRyxFQUFFLEdBQUc7U0FBSyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7Q0FBQSxDQUFDLENBQzdELEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FDMUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRTVCLENBQUMsSUFBSSxrQkFBa0IsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFO0FBQ3RDLFFBQU0sRUFBRSxFQUFFO0FBQ1YsT0FBSyxFQUFFLEVBQUU7QUFDVCxTQUFPLEVBQUUsRUFBRTtBQUNYLEtBQUcsRUFBRSxPQUFPLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsRUFDM0IsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMiLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUiA9IHJlcXVpcmUoJ3JlYWN0LW5leHVzJyk7XG5jb25zdCBfID0gUi5fO1xuY29uc3QgVXBsaW5rU2ltcGxlU2VydmVyID0gcmVxdWlyZSgnbmV4dXMtdXBsaW5rLXNpbXBsZS1zZXJ2ZXInKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuY29uc3QgY29tbW9uID0gcmVxdWlyZSgnLi9jb21tb24nKTtcbmNvbnN0IEFwcCA9IHJlcXVpcmUoJy4vQXBwJyk7XG5cbi8vIFJlbmRlciArIHN0YXRpYyBzZXJ2ZXJcbmV4cHJlc3MoKVxuLnVzZShjb3JzKCkpXG4udXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICdwdWJsaWMnKSkpXG4uZ2V0KCcvZmF2aWNvbi5pY28nLCAocmVxLCByZXMpID0+IHJlcy5zdGF0dXMoNDA0KS5zZW5kKG51bGwpKVxuLnVzZSgobmV3IEFwcCgpKS5wcmVyZW5kZXIpXG4ubGlzdGVuKGNvbW1vbi5yZW5kZXIucG9ydCk7XG5cbihuZXcgVXBsaW5rU2ltcGxlU2VydmVyKHsgZ3VpZDogXy5ndWlkKCksXG4gIHN0b3JlczogW10sXG4gIHJvb21zOiBbXSxcbiAgYWN0aW9uczogW10sXG4gIGFwcDogZXhwcmVzcygpLnVzZShjb3JzKCkpLFxufSkpLmxpc3Rlbihjb21tb24udXBsaW5rLnBvcnQpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9