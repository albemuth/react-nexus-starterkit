"use strict";

require("6to5/polyfill");
var Promise = require("bluebird");var __DEV__ = (process.env.NODE_ENV !== "production");
var R = require("react-nexus");
var _ = R._;
var UplinkSimpleServer = require("nexus-uplink-simple-server");
var express = require("express");
var cors = require("cors");
var path = require("path");

var common = require("./common");
var App = require("./App");

function listening(name, port) {
  return function () {
    return console.log("" + name + " listening on port " + port + ".");
  };
}

// Render + static server
express().use(cors()).use(express["static"](path.join(__dirname, "..", "public"))).get("/favicon.ico", function (req, res) {
  return res.status(404).send(null);
}).use((new App()).prerender).listen(common.render.port, listening("render", common.render.port));

(new UplinkSimpleServer({ guid: _.guid(),
  stores: [],
  rooms: [],
  actions: [],
  app: express().use(cors()) })).listen(common.uplink.port, listening("uplink", common.uplink.port));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN6QixJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQUFBQyxJQUFNLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLFlBQVksQ0FBQyxDQUFDO0FBQzdGLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNqQyxJQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2QsSUFBTSxrQkFBa0IsR0FBRyxPQUFPLENBQUMsNEJBQTRCLENBQUMsQ0FBQztBQUNqRSxJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDbkMsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdCLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFN0IsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25DLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFN0IsU0FBUyxTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRTtBQUM3QixTQUFPO1dBQU0sT0FBTyxDQUFDLEdBQUcsTUFBSSxJQUFJLDJCQUFzQixJQUFJLE9BQUk7R0FBQSxDQUFDO0NBQ2hFOzs7QUFHRCxPQUFPLEVBQUUsQ0FDUixHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FDWCxHQUFHLENBQUMsT0FBTyxVQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FDekQsR0FBRyxDQUFDLGNBQWMsRUFBRSxVQUFDLEdBQUcsRUFBRSxHQUFHO1NBQUssR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0NBQUEsQ0FBQyxDQUM3RCxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQzFCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzs7QUFFckUsQ0FBQyxJQUFJLGtCQUFrQixDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUU7QUFDdEMsUUFBTSxFQUFFLEVBQUU7QUFDVixPQUFLLEVBQUUsRUFBRTtBQUNULFNBQU8sRUFBRSxFQUFFO0FBQ1gsS0FBRyxFQUFFLE9BQU8sRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUMzQixDQUFDLENBQUMsQ0FDRixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUiA9IHJlcXVpcmUoJ3JlYWN0LW5leHVzJyk7XG5jb25zdCBfID0gUi5fO1xuY29uc3QgVXBsaW5rU2ltcGxlU2VydmVyID0gcmVxdWlyZSgnbmV4dXMtdXBsaW5rLXNpbXBsZS1zZXJ2ZXInKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuY29uc3QgY29tbW9uID0gcmVxdWlyZSgnLi9jb21tb24nKTtcbmNvbnN0IEFwcCA9IHJlcXVpcmUoJy4vQXBwJyk7XG5cbmZ1bmN0aW9uIGxpc3RlbmluZyhuYW1lLCBwb3J0KSB7XG4gIHJldHVybiAoKSA9PiBjb25zb2xlLmxvZyhgJHtuYW1lfSBsaXN0ZW5pbmcgb24gcG9ydCAke3BvcnR9LmApO1xufVxuXG4vLyBSZW5kZXIgKyBzdGF0aWMgc2VydmVyXG5leHByZXNzKClcbi51c2UoY29ycygpKVxuLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nLCAncHVibGljJykpKVxuLmdldCgnL2Zhdmljb24uaWNvJywgKHJlcSwgcmVzKSA9PiByZXMuc3RhdHVzKDQwNCkuc2VuZChudWxsKSlcbi51c2UoKG5ldyBBcHAoKSkucHJlcmVuZGVyKVxuLmxpc3Rlbihjb21tb24ucmVuZGVyLnBvcnQsIGxpc3RlbmluZygncmVuZGVyJywgY29tbW9uLnJlbmRlci5wb3J0KSk7XG5cbihuZXcgVXBsaW5rU2ltcGxlU2VydmVyKHsgZ3VpZDogXy5ndWlkKCksXG4gIHN0b3JlczogW10sXG4gIHJvb21zOiBbXSxcbiAgYWN0aW9uczogW10sXG4gIGFwcDogZXhwcmVzcygpLnVzZShjb3JzKCkpLFxufSkpXG4ubGlzdGVuKGNvbW1vbi51cGxpbmsucG9ydCwgbGlzdGVuaW5nKCd1cGxpbmsnLCBjb21tb24udXBsaW5rLnBvcnQpKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==