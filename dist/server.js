"use strict";

require("6to5/polyfill");
var Promise = require("bluebird");var __DEV__ = (process.env.NODE_ENV !== "production");
var R = require("react-nexus");
var _ = R._;
var UplinkSimpleServer = require("nexus-uplink-simple-server");
var express = require("express");
var cors = require("cors");
var path = require("path");

var common = require("./common");
var App = require("./App");

function listening(name, port) {
  return function () {
    return console.log("" + name + " listening on port " + port + ".");
  };
}

// Render + static server
express().use(cors()).use(express["static"](path.join(__dirname, "..", "public"))).get("/favicon.ico", function (req, res) {
  return res.status(404).send(null);
}).use((new App()).prerender).listen(common.render.port, listening("render", common.render.port));

(new UplinkSimpleServer({
  pid: _.guid("pid"),
  stores: [],
  rooms: [],
  actions: [],
  app: express().use(cors()) })).listen(common.uplink.port, listening("uplink", common.uplink.port));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN6QixJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQUFBQyxJQUFNLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLFlBQVksQ0FBQyxDQUFDO0FBQzdGLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNqQyxJQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2QsSUFBTSxrQkFBa0IsR0FBRyxPQUFPLENBQUMsNEJBQTRCLENBQUMsQ0FBQztBQUNqRSxJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDbkMsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdCLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFN0IsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25DLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFN0IsU0FBUyxTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRTtBQUM3QixTQUFPO1dBQU0sT0FBTyxDQUFDLEdBQUcsTUFBSSxJQUFJLDJCQUFzQixJQUFJLE9BQUk7R0FBQSxDQUFDO0NBQ2hFOzs7QUFHRCxPQUFPLEVBQUUsQ0FDUixHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FDWCxHQUFHLENBQUMsT0FBTyxVQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FDekQsR0FBRyxDQUFDLGNBQWMsRUFBRSxVQUFDLEdBQUcsRUFBRSxHQUFHO1NBQUssR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0NBQUEsQ0FBQyxDQUM3RCxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQzFCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzs7QUFFckUsQ0FBQyxJQUFJLGtCQUFrQixDQUFDO0FBQ3RCLEtBQUcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUNsQixRQUFNLEVBQUUsRUFBRTtBQUNWLE9BQUssRUFBRSxFQUFFO0FBQ1QsU0FBTyxFQUFFLEVBQUU7QUFDWCxLQUFHLEVBQUUsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQzNCLENBQUMsQ0FBQyxDQUNGLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJzZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSID0gcmVxdWlyZSgncmVhY3QtbmV4dXMnKTtcbmNvbnN0IF8gPSBSLl87XG5jb25zdCBVcGxpbmtTaW1wbGVTZXJ2ZXIgPSByZXF1aXJlKCduZXh1cy11cGxpbmstc2ltcGxlLXNlcnZlcicpO1xuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG5jb25zdCBjb21tb24gPSByZXF1aXJlKCcuL2NvbW1vbicpO1xuY29uc3QgQXBwID0gcmVxdWlyZSgnLi9BcHAnKTtcblxuZnVuY3Rpb24gbGlzdGVuaW5nKG5hbWUsIHBvcnQpIHtcbiAgcmV0dXJuICgpID0+IGNvbnNvbGUubG9nKGAke25hbWV9IGxpc3RlbmluZyBvbiBwb3J0ICR7cG9ydH0uYCk7XG59XG5cbi8vIFJlbmRlciArIHN0YXRpYyBzZXJ2ZXJcbmV4cHJlc3MoKVxuLnVzZShjb3JzKCkpXG4udXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICdwdWJsaWMnKSkpXG4uZ2V0KCcvZmF2aWNvbi5pY28nLCAocmVxLCByZXMpID0+IHJlcy5zdGF0dXMoNDA0KS5zZW5kKG51bGwpKVxuLnVzZSgobmV3IEFwcCgpKS5wcmVyZW5kZXIpXG4ubGlzdGVuKGNvbW1vbi5yZW5kZXIucG9ydCwgbGlzdGVuaW5nKCdyZW5kZXInLCBjb21tb24ucmVuZGVyLnBvcnQpKTtcblxuKG5ldyBVcGxpbmtTaW1wbGVTZXJ2ZXIoe1xuICBwaWQ6IF8uZ3VpZCgncGlkJyksXG4gIHN0b3JlczogW10sXG4gIHJvb21zOiBbXSxcbiAgYWN0aW9uczogW10sXG4gIGFwcDogZXhwcmVzcygpLnVzZShjb3JzKCkpLFxufSkpXG4ubGlzdGVuKGNvbW1vbi51cGxpbmsucG9ydCwgbGlzdGVuaW5nKCd1cGxpbmsnLCBjb21tb24udXBsaW5rLnBvcnQpKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==