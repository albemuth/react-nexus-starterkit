"use strict";

require("6to5/polyfill");
var Promise = require("bluebird");
var R = require("react-nexus");
var _ = R._;
var UplinkSimpleServer = require("nexus-uplink-simple-server");
var express = require("express");
var cors = require("cors");
var path = require("path");

var common = require("./common");
var App = require("./App");

// Render + static server
express().use(cors()).use(express["static"](path.join(__dirname, "..", "public"))).get("/favicon.ico", function (req, res) {
  return res.status(404).send(null);
}).use((new App()).prerender).listen(common.render.port);


// Uplink server
var uplink = express().use(cors());
(new UplinkSimpleServer({
  guid: _.guid(),
  stores: [],
  rooms: [],
  actions: []
})).attach(uplink);
uplink.listen(common.uplink.port);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImc6L3JlYWN0LW5leHVzL3JlYWN0LW5leHVzLXN0YXJ0ZXJraXQvc3JjL3NlcnZlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN6QixJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDcEMsSUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ2pDLElBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDZCxJQUFNLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0FBQ2pFLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNuQyxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUU3QixJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDbkMsSUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDOzs7QUFHN0IsT0FBTyxFQUFFLENBQ1IsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQ1gsR0FBRyxDQUFDLE9BQU8sVUFBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQ3pELEdBQUcsQ0FBQyxjQUFjLEVBQUUsVUFBQyxHQUFHLEVBQUUsR0FBRztTQUFLLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztDQUFBLENBQUMsQ0FDN0QsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUMxQixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQzs7OztBQUk1QixJQUFJLE1BQU0sR0FBRyxPQUFPLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUNuQyxDQUFDLElBQUksa0JBQWtCLENBQUM7QUFDdEIsTUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUU7QUFDZCxRQUFNLEVBQUUsRUFDUDtBQUNELE9BQUssRUFBRSxFQUNOO0FBQ0QsU0FBTyxFQUFFLEVBQ1I7Q0FDRixDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDbkIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDIiwiZmlsZSI6InNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJzZ0bzUvcG9seWZpbGwnKTtcbmNvbnN0IFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xuY29uc3QgUiA9IHJlcXVpcmUoJ3JlYWN0LW5leHVzJyk7XG5jb25zdCBfID0gUi5fO1xuY29uc3QgVXBsaW5rU2ltcGxlU2VydmVyID0gcmVxdWlyZSgnbmV4dXMtdXBsaW5rLXNpbXBsZS1zZXJ2ZXInKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuY29uc3QgY29tbW9uID0gcmVxdWlyZSgnLi9jb21tb24nKTtcbmNvbnN0IEFwcCA9IHJlcXVpcmUoJy4vQXBwJyk7XG5cbi8vIFJlbmRlciArIHN0YXRpYyBzZXJ2ZXJcbmV4cHJlc3MoKVxuLnVzZShjb3JzKCkpXG4udXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICdwdWJsaWMnKSkpXG4uZ2V0KCcvZmF2aWNvbi5pY28nLCAocmVxLCByZXMpID0+IHJlcy5zdGF0dXMoNDA0KS5zZW5kKG51bGwpKVxuLnVzZSgobmV3IEFwcCgpKS5wcmVyZW5kZXIpXG4ubGlzdGVuKGNvbW1vbi5yZW5kZXIucG9ydCk7XG5cblxuLy8gVXBsaW5rIHNlcnZlclxubGV0IHVwbGluayA9IGV4cHJlc3MoKS51c2UoY29ycygpKTtcbihuZXcgVXBsaW5rU2ltcGxlU2VydmVyKHtcbiAgZ3VpZDogXy5ndWlkKCksXG4gIHN0b3JlczogW1xuICBdLFxuICByb29tczogW1xuICBdLFxuICBhY3Rpb25zOiBbXG4gIF1cbn0pKS5hdHRhY2godXBsaW5rKTtcbnVwbGluay5saXN0ZW4oY29tbW9uLnVwbGluay5wb3J0KTtcblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9